---
layout: post 
title: "Bash"
---

Reload your bash profile: `source ~/.bash_profile`.

Need to remove those odd Windows line endings? `dos2unix` is your friend.

Want to run a script over each file of a certain name in a directory?

```bash
find ../blah-directory -name "*rules.txt" -print0 | 
  xargs -0 -I {} ./myscript.sh {} | tee all_output.tsv
```

Redirect STDERR: `2> /dev/null` or `2>&1`.

Want to cat line by line? `paste -d file1 file2`

Need a random sample of lines from a file? `shuf -n 10` will give  you 10 lines. In Mac you need to use `gshuf`.

#### Get Public IP

```bash
dig +short myip.opendns.com @resolver1.opendns.com
```

Put this in your `bashrc`:

```bash
alias wanip='dig +short myip.opendns.com @resolver1.opendns.com'
```


#### Moreutils

Checkout [moreutils](http://joeyh.name/code/moreutils/) for some useful cli, e.g., `sponge`.

```bash
# stop using those pesky temp files.
cut -d, -f2 top_10k.txt | sponge top_10k.txt
```

#### Awk

Prepend text.

```bash
awk '{print "http://" $0;}' < top_10k.txt
```

#### Parallel

Grab the HTML from an input list of domains:

```bash
parallel --progress --timeout 5 -a top_1k_sans_proto.txt curl -sL {} '>' curl-out/{}.html
```

#### jq

Prettify the JSON: `cat example.json | jq '.'`
Get the number of elements `cat example.json | jq 'length'`
